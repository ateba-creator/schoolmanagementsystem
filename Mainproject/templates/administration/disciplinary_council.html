{% extends 'base/base.html' %}
{% load static %}
{% block title %} School Management System {% endblock %}
{% block content %}

{% for message in messages %}
                {% if "success" in message.tags %}
                  <div class="row">
            <div class="col-12">
                <div class="alert alert-success" style="text-align:center;">{{message}}</div>
            </div>
          </div>
                {% endif %}
 {% if "error" in message.tags %}
                  <div class="row">
            <div class="col-12">
                <div class="alert alert-danger" style="text-align:center;">{{message}}</div>
            </div>
          </div>
                {% endif %}
                {% endfor %}
{% for group in user.groups.all %}
<div class="col-lg-12 grid-margin stretch-card" id="department-list">
              <div class="card">
                <div class="card-body shadow">
                    {% if group.name == 'administrateur' or group.name == 'adminteacher' or group.name == 'adminparent' or group.name == 'adminparenteacher' %}
                    <div class="row">
                        <div class="col-md-12">
                            <h3> <img src="{% static 'Mainapp/images/add.png' %}" class="heading-icon">Ajoutez des descisions et des conclusions au conseil de discipline</h3>
                        </div>
                    </div>
                    <hr class="line">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="nav-item">
            <a class="nav-link" data-toggle="collapse" href="#ui-basic10" aria-expanded="false" aria-controls="ui-basic10">
              <button type="submit" class="btn btn-danger menu-title" style="width:380px;"> + Convocations</button>
              <i class="menu-arrow"></i>
            </a>
            <div class="collapse" id="ui-basic10">

                <form method="post" action="{% url 'disciplinary council' %}">
                    {% csrf_token %}
                    <div style ="border:1px solid #e3e9ed;padding:10px;width:380px;margin-left:16px;border-radius:10px;" class="shadow">
              <div class="col-md-12">
                            <div class="form-group">
                                <label>Heures d'absences superieur ou equal a</label>
                                    <input type="text" class="form-control-special text-dark" required="required" name="hours">
                            </div>
                        </div>
                        <input type="text" class="hidden" name="status" value="convocation">
                    <hr class="line">
                    <div style="text-align:center;">
                    <button type="submit" class="btn btn-rounded btn-success">save</button>
                    </div>
                    </div>

                </form>

            </div>
          </div>
                    <div class="nav-item">
            <a class="nav-link" data-toggle="collapse" href="#ui-basic7" aria-expanded="false" aria-controls="ui-basic7">
              <button type="submit" class="btn btn-dark menu-title" style="width:380px;"> + Avertissement conduite</button>
              <i class="menu-arrow"></i>
            </a>
            <div class="collapse" id="ui-basic7">

                <form method="post" action="{% url 'disciplinary council' %}">
                    {% csrf_token %}
                    <div style ="border:1px solid #e3e9ed;padding:10px;width:380px;margin-left:16px;border-radius:10px;" class="shadow">
              <div class="col-md-12">
                            <div class="form-group">
                                <label>Entre (Heures d'absences)</label>
                                    <input type="text" class="form-control-special text-dark" required="required" name="hours">
                            </div>
                        </div>
                         <div class="col-md-12">
                         <div class="form-group">
                                <label>Et (Heures d'absences)</label>
                             <input type="text" class="form-control-special text-dark" required="required" name="hours2">
                            </div>
                         </div>
                        <input type="text" class="hidden" name="status" value="avertissement conduite">
                    <hr class="line">
                    <div style="text-align:center;">
                    <button type="submit" class="btn btn-rounded btn-success">save</button>
                    </div>
                    </div>

                </form>

            </div>
          </div>
                    <div class="nav-item">
            <a class="nav-link" data-toggle="collapse" href="#ui-basic8" aria-expanded="false" aria-controls="ui-basic8">
              <button type="submit" class="btn btn-dark menu-title" style="width:380px;"> + Blame conduite</button>
              <i class="menu-arrow"></i>
            </a>
            <div class="collapse" id="ui-basic8">

                <form method="post" action="{% url 'disciplinary council' %}">
                    {% csrf_token %}
                    <div style ="border:1px solid #e3e9ed;padding:10px;width:380px;margin-left:16px;border-radius:10px;" class="shadow">
              <div class="col-md-12">
                            <div class="form-group">
                                <label>Entre (Heures d'absences)</label>
                                    <input type="text" class="form-control-special text-dark" required="required" name="hours">
                            </div>
                        </div>
                         <div class="col-md-12">
                         <div class="form-group">
                                <label>Et (Heures d'absences)</label>
                             <input type="text" class="form-control-special text-dark" required="required" name="hours2">
                            </div>
                         </div>
                        <input type="text" class="hidden" name="status" value="blame conduite">
                    <hr class="line">
                    <div style="text-align:center;">
                    <button type="submit" class="btn btn-rounded btn-success">save</button>
                    </div>
                    </div>

                </form>

            </div>
          </div>

                            <div class="nav-item">

            <a class="nav-link" data-toggle="collapse" href="#ui-basic12" aria-expanded="false" aria-controls="ui-basic12">
              <button type="submit" class="btn btn-dark menu-title" style="width:380px;"> + Heures d'exclusions</button>
              <i class="menu-arrow"></i>
            </a>
            <div class="collapse" id="ui-basic12">

                <form method="post" action="{% url 'disciplinary council' %}">
                    {% csrf_token %}
                    <div style ="border:1px solid #e3e9ed;padding:10px;width:380px;margin-left:16px;border-radius:10px;" class="shadow">
              <div class="col-md-12">
                            <div class="form-group">
                                <label>Entre (Heures d'absences)</label>
                                    <input type="text" class="form-control-special text-dark" required="required" name="hours">
                            </div>
                        </div>
                        <div class="col-md-12">
                            <div class="form-group">
                                <label>Et (Heures d'absences)</label>
                                    <input type="text" class="form-control-special text-dark" required="required" name="hours2">
                            </div>
                        </div>
                         <div class="col-md-12">
                         <div class="form-group">
                                <label>Heures d'exclusions</label>
                             <input type="text" class="form-control-special text-dark" required="required" name="ex_hours">
                            </div>
                         </div>
                        <input type="text" class="hidden" name="status" value="heures d'exclusions">
                    <hr class="line">
                    <div style="text-align:center;">
                    <button type="submit" class="btn btn-rounded btn-success">save</button>
                    </div>
                    </div>

                </form>

            </div>
          </div>


                    </div>

                         <div class="col-md-6">
                             <div class="nav-item">
            <a class="nav-link" data-toggle="collapse" href="#ui-basic11" aria-expanded="false" aria-controls="ui-basic11">
              <button type="submit" class="btn btn-danger menu-title" style="width:380px;"> + Exclusion definitive</button>
              <i class="menu-arrow"></i>
            </a>
            <div class="collapse" id="ui-basic11">

                <form method="post" action="{% url 'disciplinary council' %}">
                    {% csrf_token %}
                    <div style ="border:1px solid #e3e9ed;padding:10px;width:380px;margin-left:16px;border-radius:10px;" class="shadow">
              <div class="col-md-12">
                            <div class="form-group">
                                <label>Plus de (Heures d'absences)</label>
                                    <input type="text" class="form-control-special text-dark" required="required" name="hours">
                            </div>
                        </div>
                        <input type="text" class="hidden" name="status" value="exclusion definitive">
                    <hr class="line">
                    <div style="text-align:center;">
                    <button type="submit" class="btn btn-rounded btn-success">save</button>
                    </div>
                    </div>

                </form>

            </div>
          </div>
                    <div class="nav-item">
            <a class="nav-link" data-toggle="collapse" href="#ui-basic13" aria-expanded="false" aria-controls="ui-basic13">
              <button type="submit" class="btn btn-dark menu-title" style="width:380px;"> + Jours d'exclusions</button>
              <i class="menu-arrow"></i>
            </a>
            <div class="collapse" id="ui-basic13">

                <form method="post" action="{% url 'disciplinary council' %}">
                    {% csrf_token %}
                    <div style ="border:1px solid #e3e9ed;padding:10px;width:380px;margin-left:16px;border-radius:10px;" class="shadow">
              <div class="col-md-12">
                            <div class="form-group">
                                <label>Entre (Heures d'absences)</label>
                                    <input type="text" class="form-control-special text-dark" required="required" name="hours">
                            </div>
                        </div>
                        <div class="col-md-12">
                            <div class="form-group">
                                <label>Et (Heures d'absences)</label>
                                    <input type="text" class="form-control-special text-dark" required="required" name="hours2">
                            </div>
                        </div>
                         <div class="col-md-12">
                         <div class="form-group">
                                <label>Jours d'exclusions</label>
                             <input type="text" class="form-control-special text-dark" required="required" name="ex_days">
                            </div>
                         </div>
                        <input type="text" class="hidden" name="status" value="jours d'exclusions">
                    <hr class="line">
                    <div style="text-align:center;">
                    <button type="submit" class="btn btn-rounded btn-success">save</button>
                    </div>
                    </div>

                </form>

            </div>
          </div>

                             <div class="nav-item">
            <a class="nav-link" data-toggle="collapse" href="#ui-basic14" aria-expanded="false" aria-controls="ui-basic14">
              <button type="submit" class="btn btn-dark menu-title" style="width:380px;"> + Traduction au conseil de discipline</button>
              <i class="menu-arrow"></i>
            </a>
            <div class="collapse" id="ui-basic14">

                <form method="post" action="{% url 'disciplinary council' %}">
                    {% csrf_token %}
                    <div style ="border:1px solid #e3e9ed;padding:10px;width:380px;margin-left:16px;border-radius:10px;" class="shadow">
              <div class="col-md-12">
                            <div class="form-group">
                                <label>Plus de (heures d'absences) </label>
                                    <input type="text" class="form-control-special text-dark" required="required" name="hours">
                            </div>
                        </div>
                        <input type="text" class="hidden" name="status" value="conseil de discipline">
                    <hr class="line">
                    <div style="text-align:center;">
                    <button type="submit" class="btn btn-rounded btn-success">save</button>
                    </div>
                    </div>

                </form>

            </div>
          </div>
                         </div>
                    </div> <hr class="line">
{% endif %}

                    <div class="row">
                        <div class="col-md-12">
                            <h3><img src="{% static 'Mainapp/images/pen(1).png' %}" class="heading-icon">Liste des descisions et conclusions du conseil de discipline</h3>
                        </div>
                    </div>
                    <hr class="line">

                    <table class="table table-bordered" id="new_table">
                        <thead>
                        <tr>

                            <th colspan="1" style="text-align:center;">Nom du conseil</th>
                            <th style="text-align:center;" colspan="2">Conclusion</th>
                        </tr>
                        </thead>
                        <tbody>

                        {% for discipline in disciplines %}
                        <form action="{% url 'delete discipline' %}" method="get">
                        <tr>
                            <td style="text-transform:uppercase"><strong>{{discipline.name}}</strong></td>
                            {% if discipline.name != "convocation" and discipline.name != "exclusion definitive" and discipline.name != "conseil de discipline" %}
                            <td style="text-align:center;">
                                <ul>
                                    <li>Entre <strong class="text-danger">{{discipline.hours}}</strong> et <strong class="text-danger">{{discipline.hours2}}</strong> Heures d'absences</li>
                                </ul>
                            </td>
                            {% endif %}
                            {% if discipline.name == 'convocation' %}
                            <td style="text-align:center;">
                                <ul>
                                    <li>Plus de <strong class="text-danger"> {{discipline.hours}} </strong>heures d'absences</li>
                                </ul>
                            </td>
                            {% endif %}
                            {% if discipline.name == 'conseil de discipline' %}
                            <td style="text-align:center;">
                                <ul>
                                    <li>Plus de <strong class="text-danger"> {{discipline.hours}} </strong>heures d'absences</li>
                                </ul>
                            </td>
                            {% endif %}
                {% if discipline.name == 'exclusion definitive' %}
                            <td style="text-align:center;">
                                <ul>
                                    <li>Plus de <strong class="text-danger"> {{discipline.hours}} </strong>heures d'absences</li>
                                </ul>
                            </td>
                            {% endif %}

                            <td class="hidden">
                                <input type="text" name="discipline_id" value="{{discipline.id}}">
                            </td>
                            {% if group.name == 'administrateur' or group.name == 'adminteacher' or group.name == 'adminparent' or group.name == 'adminparenteacher' %}
                            <td style="text-align:center;">
                                <button type="submit" class="badge badge-danger bd" style="border-radius:100%;">X</button>
                            </td>
                            {% endif %}
                        </tr>
                        </form>
                        {% endfor %}

                        {% if exclusion_hours %}

                            <thead>
                    <tr><th colspan="3" style="text-align:center;">HEURES D'EXCLUSIONS</th></tr>
                    </thead>
                            {% for hour in exclusion_hours %}
                        <form action="{% url 'delete discipline' %}" method="get">
                            <tr>
                            <td style="text-align:center;" colspan="2">
                                <ul>
                                    <li>Entre <strong > {{hour.hours}} </strong> et <strong>{{hour.hours2}}</strong> heures d'absences : <strong class="text-danger">{{hour.ex_hours}}</strong> heures d'exclusions </li>
                                </ul>
                            </td>
                            <td class="hidden">
                                <input type="text" name="hour_id" value="{{hour.id}}">
                            </td>
                            <td class="hidden">
                                <input type="text" name="delete_status" value="hour">
                            </td>
                                {% if group.name == 'administrateur' or group.name == 'adminteacher' or group.name == 'adminparent' or group.name == 'adminparenteacher' %}
                            <td style="text-align:center;">
                                <button type="submit" class="badge badge-danger bd" style="border-radius:100%;">X</button>
                            </td>
                                {% endif %}
                        </tr>
                        </form>
                        {% endfor %}
                        {% endif %}

                        {% if exclusion_days %}

                            <thead>
                    <tr><th colspan="3" style="text-align:center;">JOURS D'EXCLUSIONS</th></tr>
                    </thead>
                            {% for hour in exclusion_days %}
                        <form action="{% url 'delete discipline' %}" method="get">
                            <tr>
                            <td style="text-align:center;" colspan="2">
                                <ul>
                                    <li>Entre <strong> {{hour.hours}} </strong> et <strong>{{hour.hours2}}</strong> heures d'absences : <strong class="text-danger">{{hour.ex_days}}</strong> jours d'exclusions </li>
                                </ul>
                            </td>
                            <td class="hidden">
                                <input type="text" name="day_id" value="{{hour.id}}">
                            </td>
                            <td class="hidden">
                                <input type="text" name="delete_status" value="day">
                            </td>
                                {% if group.name == 'administrateur' or group.name == 'adminteacher' or group.name == 'adminparent' or group.name == 'adminparenteacher' %}
                            <td style="text-align:center;">
                                <button type="submit" class="badge badge-danger bd" style="border-radius:100%;">X</button>
                            </td>
                            {% endif %}
                        </tr>
                         </form>
                        {% endfor %}
                        {% endif %}
                        </tbody>
                    </table>

                </div>
              </div>
            </div>

{% endfor %}
{% endblock %}